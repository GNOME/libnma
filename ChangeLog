2007-09-20  Rodrigo Moya <rodrigo@gnome-db.org>

	* src/connection-editor/Makefile.am: install Glade file in the same
	directory used by the applet.

2007-09-20  Rodrigo Moya <rodrigo@gnome-db.org>

	* src/applet.c (nma_context_menu_create): added 'Edit Connections...'
	item to the context menu.
	(nma_edit_connections_cb): added callback for the menu item.

	* src/Makefile.am: added really connection-editor to the build and
	added connection editor "widgets" to the applet's SOURCES.

	* src/connection-editor/nm-connection-editor.glade: fixed typo.

	* src/connection-editor/nm-connection-editor.[ch]:
	(nm_connection_editor_show, nm_connection_editor_run_and_close): new
	functions to make it easier to manage the underlying dialog (maybe this
	should be a GtkDialog-based class?)
	(nm_connection_editor_init): keep a reference to the dialog also.
	(nm_connection_editor_finalize): destroy the dialog.
	(dialog_response_cb): don't exit the main loop, just hide the dialog.

	* src/connection-editor/nm-connection-list.[ch]:
	(edit_connection_cb): fixed call to gtk_tree_view_get_selected_rows().
	(nm_connection_list_show, nm_connection_list_run_and_close,
	nm_connection_list_init, nm_connection_list_finalize, dialog_response_cb):
	same as in nm-connection-editor.[ch].

	* src/connection-editor/main.c (main): added missing argument to
	nm_connection_editor_new().

2007-09-19  Dan Williams <dcbw@redhat.com>

	* src/applet.c
		- (nma_menu_item_activate, nma_menu_add_create_network_item,
		   ap_hash, nma_add_networks_helper, sort_wireless_networks,
		   nma_menu_device_add_networks, foo_bssid_strength_changed,
		   foo_wireless_state_change): adapt for changes to libnm-glib, SSID
			must not be freed

2007-09-20  Rodrigo Moya <rodrigo@gnome-db.org>

	* src/connection-editor/nm-connection-editor.h: added flags for pages.
	
	* src/connection-editor/nm-connection-editor.c
	(nm_connection_editor_set_connection): use g_object_unref for
	destroying the NMConnection.
	(nm_connection_editor_new): added flags argument.

	* src/connection-editor/nm-connection-list.[ch]:
	* src/connection-editor/nm-connection-editor.glade: added connection
	list dialog.
	
2007-09-19  Rodrigo Moya <rodrigo@gnome-db.org>

	* src/connection-editor.c: fixed compilation warnings.
	(wireless_*_changed): added missing callbacks for wireless options.

2007-09-19  Rodrigo Moya <rodrigo@gnome-db.org>

	* src/connection-editor: new connection editor.

	* configure.ac: added connection editor to the build.

2007-09-16  Dan Williams  <dcbw@redhat.com>

	* src/applet-dbus-settings.c
		- (read_connection_from_gconf, copy_connection_to_gconf): use new
			NMSettings value enumeration functions from libnm-util to
			simplify read/write of settings from GConf

2007-09-14  Dan Williams  <dcbw@redhat.com>

	* configure.ac
	  src/Makefile.am
	  src/applet-compat.c
	  src/applet-compat.h
	  src/applet.c
	  src/applet.h
		- Handle removal of unused stuff from libnm-util

2007-09-14  Dan Williams  <dcbw@redhat.com>

	* src/applet-dbus-settings.c
		- (applet_dbus_connection_settings_new_from_connection,
		   applet_dbus_connection_settings_get_id,
		   applet_dbus_connection_settings_get_settings,
		   applet_dbus_connection_settings_get_secrets): a bit of extra
			validation of NMConnection objects

2007-09-14  Dan Williams  <dcbw@redhat.com>

	* src/applet-dbus-settings.c
		- (copy_connection_to_gconf): handle lack of an 802-11-wireless-security
			setting; open networks don't need one

2007-09-14  Dan Williams  <dcbw@redhat.com>

	* src/applet-dbus-settings.c
		- (read_connection_from_gconf): use the right gconf key

2007-09-14  Dan Williams  <dcbw@redhat.com>

	* src/applet-dbus-settings.c
		- (applet_dbus_connection_settings_init): don't create a new NMConnection
			that's just going to get thrown away immediately anyway

2007-09-14  Dan Williams  <dcbw@redhat.com>

	* src/applet-dbus-settings.c
		- (applet_dbus_settings_add_connection): send out NewConnection signal
			when adding a new connection

2007-09-14  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (foo_set_icon): don't redraw the applet icon if nothing has actually
			changed

2007-09-14  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (nma_menu_item_activate): set the SSID of the new connection so that
			it's actually valid; don't unref the new connection since the
			AppletDBusConnectionSettings object takes ownership of it

2007-09-13  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
	  src/applet.h
		- (nma_menu_item_activate): fix for changes to nm_device_activate() in
			libnm-glib to pass connection object path rather than NMConnection
			object
		- (nma_finalize, nma_constructor): stop monitoring old GConf path for
			changes

	* src/applet-dbus-settings.c
	  src/applet-dbus-settings.h
		- (applet_dbus_settings_get_by_dbus_path): new function
		- (applet_dbus_settings_add_connection): new function; add an
			NMConnection to GConf and wrap and export it over D-Bus
		- (read_connection_from_gconf): fix gconf setting name
		- (add_keyring_item): new function; add a secret to the keyring
		- (copy_connection_to_gconf): new function; copy an NMConnection object
			to GConf and the keyring
		- (applet_dbus_connection_settings_new_from_connection): new function;
			create a new NMConnection D-Bus export wrapper from an NMConnection
			object

2007-09-13  Dan Williams  <dcbw@redhat.com>

	* src/gconf-helpers.c
	  src/gconf-helpers.h
		- (nm_gconf_set_int_helper, nm_gconf_set_string_helper, 
		   nm_gconf_set_bool_helper, nm_gconf_set_stringlist_helper,
		   nm_gconf_set_bytearray_helper): new functions

2007-09-12  Tambet Ingo  <tambet@gmail.com>

	* src/applet.c: Rewrite the VPN connection handling now that everything
	underneath has changed.

	* src/vpn-properties/nm-vpn-ui-interface.h: Convert properties to hash tables
	eveyrwhere.

	* src/vpn-properties/nm-vpn-properties.c: Create properties hash tables instead
	of GSLists.

	* src/vpn-password-dialog.c: Passwords are now dictionary items. Use odd strings
	from the helper output as keys, even keys for values.

	* src/vpn-connection-info.[ch]: Implement.

2007-09-11  Dan Williams  <dcbw@redhat.com>

	* src/applet-dbus-settings.c
		- (applet_dbus_connection_settings_get_secrets): fix it; need to
			specify the keyring items in a lot more detail now, using the
			connection name, the setting name, and the setting key for each
			secret

2007-09-11  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (nma_menu_item_activate): Fix up device activation for changes
			in argument types for Activate

2007-09-09  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- Clean up applet widget creation and finalization

2007-09-06  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
	  src/applet.h
		- Random cleanups; dropdown_menu -> menu, clean up usage of
			nma_menu_clear(), kill nma_dropdown_menu_populate(), fix
			menu destruction to ensure we don't leak widgets

2007-09-06  Dan Williams  <dcbw@redhat.com>

	* src/menu-items.c
	  src/menu-items.h
		- (nm_network_menu_item_init): keep track of the hbox so it can be
			destroyed when necessary
		- (nm_network_menu_item_class_dispose, nm_network_menu_item_class_init):
			dispose of subwidgets as necessary; dispose of hash if needed

2007-09-02  Dan Williams  <dcbw@redhat.com>

	* src/applet-dbus-settings.c
	  src/applet-dbus-settings.h
		- Update user settings daemon D-Bus defines now that it's in
			NetworkManager.h
		- s/applet_connection->settings/applet_connection->connection/g since
			that's what it really is
		- Update for change of NMConnection to GObject subclass
		- (read_connection_from_gconf): clear ->id before trying to get the
			value again so that nm_gconf_get_string_helper() doesn't complain

	* src/applet.c
		- Update for change of NMConnection to GObject subclass

	* src/applet-dbus-manager.c
	  src/applet.h
		- Update user settings daemon D-Bus defines now that it's in
			NetworkManager.h

2007-08-30  Dan Williams  <dcbw@redhat.com>

	Patch from Jani Monoses <jani@ubuntu.com>

	* src/vpn-properties/clipboard.c
	  src/vpn-properties/nm-vpn-properties.glade
	  src/vpn-properties/nm-vpn-properties.c
		- Use GtkAssistant instead of GnomeDruid on GTK+ >= 2.10
		    (gnome.org #470554)

2007-08-30  Dan Williams  <dcbw@redhat.com>

	Patch from Jani Monoses <jani@ubuntu.com>

	* src/applet.c
		- (about_dialog_activate_link_cb): don't use gnome_url_open()
		(gnome.org #460671)

2007-08-30  Dan Williams  <dcbw@redhat.com>

	Patch from Jani Monoses <jani@ubuntu.com>

	* nm-applet.desktop
		- show in XFCE too (gnome.org #471608)

2007-08-29  Dan Williams  <dcbw@redhat.com>

	* nm-applet.conf
		- New D-Bus service name

	* src/applet-marshal.list
	  src/applet-marshal-main.c
	  src/applet-dbus-manager.c
	  src/applet-dbus-manager.h
	  src/applet.h
	  src/applet.c
	  src/Makefile.am
	  configure.ac
		- Move most D-Bus housekeeping over to the D-Bus manager rather
		than a lot of hardcoded junk in applet-dbus.c and applet-dbus-info.c

	* src/nm-utils.c
	  src/nm-utils.h
		- Remove functions that are no longer used

	* src/applet-dbus-info.c
	  src/applet-dbus-info.h
	  src/applet-dbus.c
	  src/applet-dbus.h
		- Remove, no longer used; some bits need to be replaced by Tambet's new
		VPN interface stuff

	* src/applet-dbus-settings.c
		- Hook up the new NMConnection/NMSettings stuff to D-Bus

	* src/menu-items.c
		- Remove no longer relevant bits

2007-08-29  Dan Williams  <dcbw@redhat.com>

	* src/gconf-helpers.c
		- (nm_gconf_get_bytearray_helper): make it really a byte array.  Code
			was previously appending ints, leading to 3 zero elements for each
			actual data element

2007-08-29  Dan Williams  <dcbw@redhat.com>

	Remove anything related to wireless-security-options, to be replaced
	by NMSettings/NMConnectionSettings.

2007-08-29  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
	  src/other-network-dialog.c
	  src/menu-items.c
		- Adjust for new AP flags

2007-08-22  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (ap_hash): fix missing return value, cleanups
		- (nma_add_networks_helper): don't try to free uninitialized memory
			if the ssid was NULL, don't try to free a NULL ssid
		- (foo_bssid_strength_changed): don't try to free a NULL ssid
		- (foo_wireless_state_change): handle NULLs better

2007-08-22  Dan Williams  <dcbw@redhat.com>

	* src/menu-items.c
	  src/menu-items.h
		- Make NMNetworkMenuItem a GtkCheckMenuItem subclass, not a random structure
			that contains all the widgets
		- Make the NMNetworkMenuItem accessors sane (split them out for SSID,
			strength, and detail instead a gigantic update() procedure)

	* src/applet.c
		- Use new NMNetworkMenuItem object
		- (nma_dropdown_menu_clear): remove children from the menu rather than
			destroying them directly
		- (sort_wireless_networks): ensure both SSIDs are valid before trying
			to access their contents
		- (nma_add_networks_helper): check for an existing menu item that
			represents this AP, based on a hash of certain AP properties.  If
			found, use that item instead of adding a new item.
		- (ap_hash): hash certain AP properties to combine BSSIDs into one menu
			item when needed

2007-08-21  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (sort_wireless_networks): fix various errors; ensure 0 is returned on
			when the two APs are equal, and don't use string comparisons because
			SSIDs can have embedded nulls as they are byte arrays, not strings

2007-08-20  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (sort_wireless_networks): new function
		- (nma_menu_device_add_networks): sort networks

2007-08-17  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
	  src/applet.h
		- (foo_update_icon, foo_set_icon, nma_finalize, nma_icons_free,
		   nma_icons_load_from_disk): use an array with slots instead of a
			list for the icon layers.  fixes races between link and VPN icon
			layers depending on which one gets set first

2007-08-15  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (foo_set_icon): add note that this is broken when VPN connection
			icon is set before main icon.  Layering here is buggy.
		- (foo_client_state_change): force an icon update of the VPN layer
			when updating the main icon
		- (foo_manager_running): remove incorrect comment

2007-08-14  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- Handle NM_VPN_STATE_* -> NM_VPN_SERVICE_STATE_* and NMVPNState -> 
			NMVPNServiceState renames
		- Handle NM_VPN_ACT_STAGE_* -> NM_VPN_CONNECTION_STATE_* and
			NMVPNActStage -> NMVPNConnectionState renames

2007-08-13  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (nma_menu_add_vpn_menu): sort VPN connections

2007-08-13  Dan Williams  <dcbw@redhat.com>

	Patch from Michael Biebl <biebl@debian.org>

	* po/POTFILES.in
		- Update for vpn-properties move

2007-08-13  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (nma_get_first_active_vpn_connection,
		   nma_menu_disconnect_vpn_item_activate,
		   nma_menu_add_vpn_menu): list returned from
			nm_client_get_vpn_connections() needs to be freed now
		- (foo_manager_running): set applet & vpn state to UNKNOWN when NM
			goes away

2007-08-13  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (nma_add_networks_helper): don't show non-SSID-broadcasting APs
			in the menu

2007-08-13  Tambet Ingo  <tambet@gmail.com>

	* src/applet.c (nma_menu_device_add_networks): Fix an invalid free
	which happened in case there's no active ssid.
	(sort_devices): Implement.
	(nma_menu_add_devices): Sort the devices before adding them to the menu.

2007-08-13  Rodrigo Moya <rodrigo@gnome-db.org>

	* src/gconf-helpers.c:
	* src/applet-dbus-settings.c: fixed some compilation problems.

2007-08-13  Rodrigo Moya <rodrigo@gnome-db.org>

	* src/applet.h: added new GConf path for connection settings.

	* src/gconf-helpers.[ch] (nm_gconf_get_stringlist_helper,
	nm_gconf_get_bytearray_helper): new helper functions.

	* src/applet-dbus-settings.[ch]: added implementation of the new
	configuration interface for the GConf-based applet.

	* src/Makefile.am: added new files.

2007-08-13  Tambet Ingo  <tambet@gmail.com>

	* configure.ac: libnm-glib just got renamed to libnm_glib.
	Add src/vpn-properties/Makefile to AC_OUTPUT.

	* src/Makefile.am: Add vpn-properties to SUBDIRS.

	* src/vpn-properties/*: Move it here from NetworkManager.

2007-08-09  Tambet Ingo  <tambet@gmail.com>

	* src/applet.c (foo_wireless_state_change): Fix a memory corruption.
	

2007-07-26  Dan Williams  <dcbw@redhat.com>

	Patch from Claudio Saavedra <csaavedra@alumnos.utalca.cl>

	* src/other-network-dialog.c
		- Fix critical warning; gtk_widget_destroy already destroys the
			wireless adapter TreeModel (#438441)

2007-07-26  Dan Williams  <dcbw@redhat.com>

	Patch from Jani Monoses <jani@ubuntu.com>

	* src/main.c
		- Kill usage of GnomeClient (#436832)

2007-07-26  Dan Williams  <dcbw@redhat.com>

	Patch from Jani Monoses <jani@ubuntu.com>

	* src/applet.c
	  src/other-network-dialog.c
	  src/menu-items.c
	  configure.ac
		- Remove bits for GTK < 2.6 (#436832)

2007-06-27  Dan Williams  <dcbw@redhat.com>

	* Make SSIDs GByteArrays everywhere
	* Rename "essid" -> "ssid" everywhere that's appropriate

2007-06-22  Tambet Ingo  <tambet@ximian.com>

	* src/applet.c (nma_add_networks_helper): Fix a typo that caused crashes.

2007-06-21  Tambet Ingo  <tambet@ximian.com>

	* src/applet-dbus-info.c (nmi_dbus_get_key_for_network): Move the passphrase
	dialog creation to another function that is called from the main loop so that
	the "getKeyForNetwork" dbus call can return before the dialog asks a bunch of
	information over dbus.

2207-06-14  Christopher Aillon  <caillon@redhat.com>

	* src/applet.glade: (passphrase_required)
	Connect to a network, not log in.  (#372154)

2007-06-13  Tambet Ingo  <tambet@ximian.com>

	* src/applet.c (nma_menu_item_activate): Fix the NMSettingWireless
	creation.

2007-05-07  Tambet Ingo  <tambet@ximian.com>

	* src/applet.c (nma_menu_item_activate): Create and use a NMConnection
	for device activation.

2007-03-28  Tambet Ingo  <tambet@ximian.com>

	* src/applet-dbus-info.c (nmi_dbus_get_key_for_network): Fix a typo: we do
	want the device to be a wireless device.

2007-03-26  Tambet Ingo  <tambet@ximian.com>

	Fix VPN.
	Clean up a lot of old non-working dbus calls and data structures and replace
	them with what libnm-glib provides.

	* src/applet-dbus-devices.c
	* src/applet-dbus-devices.h
	* src/applet-dbus-vpn.c
	* src/applet-dbus-vpn.h
	* src/wireless-network.c
	* src/wireless-network.h
	* src/nm-device.c
	* src/nm-device.h
	* src/vpn-connection.c
	* src/vpn-connection.h

	Remove. All of these are provided by libnm-glib now.

2007-03-16  Tambet Ingo  <tambet@ximian.com>

	First stab at converting the applet over to libnm-glib instead of using
	the low-level DBUS API (which is removed from NM by now). Since libnm-glib
	emits signals for all "interesting" state changes in NM, we don't have to
	poll for any changes in the applet and can sleep and do nothing if there
	are no events (either from X or libnm-glib).

	The current status should be that the status icon should show the correct
	icon which reflects the NM state, right-click menu should work 100%, and
	the left click menu (devices) should show the correct information. Device
	activation should work only for wired devices. VPN doesn't work at all.
	And there's a bunch of warnings on the console.

	* configure.ac: Put all PKG-CONFIG checks in one check so that it can
	remove duplicate CFLAGS, LDFLAGS and libraries to link.

2007-02-19  Dan Williams  <dcbw@redhat.com>

	Patch from Andreas Hanke <andreas.hanke@gmx-topmail.de>

	* configure.ac
		- Remove unused bits that calculate EXPANDED_BINDIR and
			DBUS_SYSTEMD_DIR (gnome.org #409322)

2007-02-18  Dan Williams  <dcbw@redhat.com>

	Patch from Christian Persch <chpe@gnome.org>
	* src/Makefile.am
		- Don't build libegg sources when using GtkStatusIcon

2007-02-16  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (nma_about_cb): update copyright dates in about dialog

2007-02-16  Dan Williams  <dcbw@redhat.com>

	Patch from Luca Ferretti

	* src/applet.c
		- (nma_constructor): remove glade_gnome_init, as it is deprecated
			(Gnome.org #402468)

2007-02-08  Dan Williams  <dcbw@redhat.com>

    Patch from Chris Aillon <caillon@redhat.com>

    * src/applet-compat.c
        - (convert_one_entry): Don't attempt to pass empty ESSID paths to GConf
            (RH #216502)

***** import from NetworkManager module *****
